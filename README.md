# 📊 Sverkii - Аналитическая платформа для финансовых транзакций

> **Профессиональная система анализа финансовых данных с поддержкой множественных источников данных, расширенной аналитикой и сверкой транзакций**

[![Node.js](https://img.shields.io/badge/Node.js-18+-green.svg)](https://nodejs.org/)
[![React](https://img.shields.io/badge/React-18.2.0-blue.svg)](https://reactjs.org/)
[![Vite](https://img.shields.io/badge/Vite-4.4.5-purple.svg)](https://vitejs.dev/)
[![Tailwind CSS](https://img.shields.io/badge/Tailwind-3.3.3-cyan.svg)](https://tailwindcss.com/)

## 🎯 Описание проекта

**Sverkii** — это современная веб-платформа для комплексного анализа финансовых транзакций, предназначенная для работы с большими объемами данных от различных платежных провайдеров. Система обеспечивает глубокую аналитику, визуализацию данных и автоматическую сверку транзакций между различными источниками.

### 🏗️ Архитектура

```
┌─────────────────┐    ┌──────────────────┐    ┌─────────────────┐
│   Frontend      │    │    Backend       │    │   External APIs │
│   React + Vite  │◄──►│  Express.js      │◄──►│  Payment APIs   │
│   Tailwind CSS  │    │  WebSocket       │    │  Currency APIs  │
└─────────────────┘    └──────────────────┘    └─────────────────┘
```

## ✨ Основные возможности

### 📁 Множественные источники данных
- **CSV файлы** - Загрузка и анализ файлов от провайдеров (Carrousel-Zorro, Zro_Monetix)
- **Enhanced API** - Расширенный API с поддержкой криптовалют, геолокации, курсов валют
- **Система сверки** - Автоматическое сравнение данных между провайдером и платформой

### 📊 Расширенная аналитика
- **Временной анализ** - Тренды по дням, неделям, месяцам
- **Конверсионная воронка** - Детальный анализ успешности транзакций
- **Географическая аналитика** - Анализ по странам и регионам
- **Валютный анализ** - Поддержка фиатных и криптовалют
- **Аномалии** - Автоматическое выявление подозрительных транзакций
- **Предиктивная аналитика** - Прогнозирование трендов

### 🎨 Современный интерфейс
- **Адаптивный дизайн** - Полная поддержка мобильных устройств
- **Темная тема** - Современный градиентный дизайн
- **Интерактивные графики** - Chart.js и Recharts для визуализации
- **Многоязычность** - Поддержка русского и английского языков
- **Виртуализация** - Эффективная работа с большими таблицами данных

### 🔄 Система сверки
- **Автоматическое сопоставление** - По Tracking ID и Foreign Operation ID
- **Анализ расхождений** - Выявление несоответствий в статусах
- **Детализированные отчеты** - Полная информация о результатах сверки
- **Экспорт результатов** - Сохранение отчетов в различных форматах

## 🛠️ Технологический стек

### Frontend
- **React 18.2** - Современная библиотека для создания интерфейсов
- **Vite 4.4** - Быстрая сборка и hot reload
- **Tailwind CSS 3.3** - Utility-first CSS framework
- **Chart.js & Recharts** - Библиотеки для создания графиков
- **Lucide React** - Современные иконки
- **PapaParse & XLSX** - Парсинг CSV и Excel файлов

### Backend
- **Express.js 4.18** - Web framework для Node.js
- **WebSocket** - Реальное время для прогресса обработки
- **Multer** - Загрузка файлов
- **CSV-Parser** - Потоковая обработка CSV
- **CORS** - Cross-origin resource sharing

### Деплой
- **Netlify** - Хостинг фронтенда с Serverless функциями
- **Netlify Functions** - Serverless API endpoints
- **Git Integration** - Автоматический деплой из репозитория

## 📦 Установка и запуск

### Предварительные требования
- Node.js 18.0.0 или выше
- npm или yarn
- Git

### Клонирование репозитория
```bash
git clone <repository-url>
cd sverkii
```

### Установка зависимостей
```bash
# Основные зависимости
npm install

# Серверные зависимости (для локальной разработки)
cd server
npm install
cd ..
```

### Запуск в режиме разработки

#### Только фронтенд (рекомендуется)
```bash
npm run dev
```
Откроется по адресу: http://localhost:3000

#### С локальным сервером (для разработки backend)
```bash
# Терминал 1 - Backend
cd server
npm run dev

# Терминал 2 - Frontend  
npm run dev
```

### Сборка для продакшена
```bash
npm run build
```

## 📁 Структура проекта

```
sverkii/
├── 📁 src/                          # Исходный код фронтенда
│   ├── 📁 components/               # React компоненты
│   │   ├── 📁 ui/                   # Базовые UI компоненты
│   │   ├── 📄 Dashboard.jsx         # Основная панель аналитики
│   │   ├── 📄 DataSourceSelector.jsx # Выбор источника данных
│   │   ├── 📄 EnhancedAPIFilters.jsx # Фильтры для Enhanced API
│   │   ├── 📄 EnhancedDataTable.jsx  # Расширенная таблица данных
│   │   ├── 📄 ReconciliationDashboard.jsx # Панель сверки
│   │   └── 📄 ...                   # Другие компоненты
│   ├── 📁 contexts/                 # React контексты
│   │   └── 📄 LanguageContext.jsx   # Контекст языка
│   ├── 📁 utils/                    # Утилиты и сервисы
│   │   ├── 📄 enhancedApiService.js # Сервис Enhanced API
│   │   ├── 📄 csvParser.js          # Парсер CSV файлов
│   │   ├── 📄 analytics.js          # Аналитические функции
│   │   ├── 📄 reconciliation.js     # Логика сверки
│   │   └── 📄 ...                   # Другие утилиты
│   ├── 📄 App.jsx                   # Главный компонент
│   └── 📄 main.jsx                  # Точка входа
├── 📁 server/                       # Backend сервер (для разработки)
│   ├── 📄 index.js                  # Express сервер
│   ├── 📄 package.json              # Зависимости сервера
│   └── 📁 uploads/                  # Временные файлы
├── 📁 netlify/                      # Netlify конфигурация
│   └── 📁 functions/                # Serverless функции
├── 📁 api/                          # API endpoints для Netlify
│   ├── 📄 health.js                 # Health check
│   └── 📄 reconcile.js              # API сверки
├── 📄 package.json                  # Основные зависимости
├── 📄 vite.config.js                # Конфигурация Vite
├── 📄 tailwind.config.js            # Конфигурация Tailwind
├── 📄 netlify.toml                  # Конфигурация Netlify
└── 📄 README.md                     # Документация
```

## 🚀 Использование

### 1. Выбор источника данных
При запуске приложения вы увидите экран выбора источника данных:

- **📂 CSV файлы** - Для анализа файлов от провайдеров
- **🚀 Enhanced API** - Для работы с расширенным API
- **🔄 Сверка данных** - Для сравнения данных между источниками

### 2. Анализ CSV файлов
- Загрузите CSV файл через drag & drop или выбор файла
- Система автоматически определит структуру данных
- Доступны различные виды аналитики и графиков
- Экспорт отчетов в PDF формате

### 3. Enhanced API
- Настройте фильтры по датам, проектам, статусам
- Поддержка криптовалют и фиатных валют
- Геолокационная аналитика
- Информация о картах и 3D Secure

### 4. Сверка данных
- Загрузите файлы от провайдера и платформы
- Система автоматически сопоставит транзакции
- Получите детальный отчет о совпадениях и расхождениях

## 🔧 Конфигурация

### Переменные окружения
```bash
# .env (опционально)
VITE_API_BASE_URL=http://localhost:3002
NODE_ENV=development
```

### Настройка API endpoints
Все API endpoints настраиваются в файлах:
- `src/utils/enhancedApiService.js` - Enhanced API
- `src/utils/reconciliation.js` - Сверка данных
- `netlify/functions/` - Serverless функции

## 📊 Поддерживаемые форматы данных

### CSV файлы провайдеров
**Обязательные поля:**
- `Reference ID` / `Tracking Id` - Уникальный идентификатор
- `Status` - Статус транзакции
- `Initial Amount` - Сумма транзакции
- `Initial Currency` - Валюта
- `Method` - Метод платежа
- `Created At` - Дата создания

**Поддерживаемые статусы:**
- `Completed`, `Success` - Успешные
- `Failed`, `Error`, `Declined` - Неуспешные  
- `Canceled`, `Cancelled` - Отмененные

### Enhanced API Response
```json
{
  "data": [
    {
      "id": "unique_id",
      "status": "success|fail",
      "amount": 100.50,
      "currency": "USD|BTC|ETH",
      "type": "fiat|crypto",
      "card_info": {...},
      "location": {...},
      "created_at": "2024-01-01T00:00:00Z"
    }
  ]
}
```

## 🎯 Ключевые метрики

### Основные показатели
- **Общее количество транзакций**
- **Коэффициент конверсии (%)**
- **Общий оборот**
- **Средняя сумма транзакции**
- **Распределение по статусам**

### Временная аналитика
- **Тренды по дням/неделям/месяцам**
- **Пиковые нагрузки**
- **Сезонность**
- **Прогнозы**

### Географическая аналитика
- **Распределение по странам**
- **Конверсия по регионам**
- **Популярные валюты**

## 🔄 Развитие и вклад в проект

### Создание новой ветки
```bash
git checkout -b feature/new-feature-name
```

### Стандарты кода
- ESLint для проверки кода
- Prettier для форматирования
- Conventional Commits для сообщений коммитов

### Тестирование
```bash
npm run lint      # Проверка кода
npm run test      # Запуск тестов (в разработке)
```

### Деплой
Проект автоматически деплоится на Netlify при push в main ветку.

## 📝 История версий

### v2.0.0 (Текущая)
- ✅ Enhanced API с поддержкой криптовалют
- ✅ Система сверки транзакций
- ✅ Геолокационная аналитика
- ✅ Многоязычность (RU/EN)
- ✅ Виртуализация таблиц
- ✅ Предиктивная аналитика

### v1.0.0
- ✅ Базовая аналитика CSV файлов
- ✅ Графики и визуализация
- ✅ Экспорт в PDF
- ✅ Адаптивный дизайн

## 🤝 Поддержка

Если у вас есть вопросы или предложения по улучшению проекта:

1. Создайте Issue в репозитории
2. Отправьте Pull Request с вашими изменениями
3. Свяжитесь с командой разработки

## 📄 Лицензия

MIT License - подробности в файле [LICENSE](LICENSE)

---

**Разработано с ❤️ для эффективного анализа финансовых данных**